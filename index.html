<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<title>iframe api</title>
</head>
<body>
    <h2>iframe api</h2>
    <p>This page includes another website using iframe. This page (let us call it <em>external</em> page) can communicate
    with the website inside the iframe using an API object</p>

    <script src="utils/log-to.js"></script>
    <script src="src/external-api.js"></script>

    <script>
    var myMethods = {
      foo: function () {
        console.log('myMethods.foo called');
      }
    };
    iframeApi(myMethods, function (err, api) {
      if (err) {
        throw new Error('iframeApi error ' + err);
      }
      console.log('received api from iframe');
      console.log('api methods:', Object.keys(api));
    });
    </script>

    <iframe id="page" src="http://glebbahmutov.com/iframe-api/test/page.html" width="100%" height="500"></iframe>
    <!--
    <iframe id="page" src="http://localhost:3003/test/page.html" width="100%" height="500"></iframe>
    -->

</body>
</html>
